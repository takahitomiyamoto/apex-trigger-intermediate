<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>Lv. 5 の解答 · Apex Trigger Intermediate</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="" />
    <meta name="generator" content="HonKit 3.6.1" />
    <meta name="author" content="Takahito Miyamoto" />

    <link rel="stylesheet" href="../gitbook/style.css" />

    <link
      rel="stylesheet"
      href="../gitbook/gitbook-plugin-highlight/website.css"
    />

    <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css" />

    <link
      rel="stylesheet"
      href="../gitbook/gitbook-plugin-fontsettings/website.css"
    />

    <meta name="HandheldFriendly" content="true" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="152x152"
      href="../gitbook/images/apple-touch-icon-precomposed-152.png"
    />
    <link
      rel="shortcut icon"
      href="../gitbook/images/favicon.ico"
      type="image/x-icon"
    />

    <link rel="next" href="../next-step/" />

    <link rel="prev" href="level-05.html" />
  </head>
  <body>
    <div class="book">
      <div class="book-summary">
        <div id="book-search-input" role="search">
          <input type="text" placeholder="検索ワードを入力" />
        </div>

        <nav role="navigation">
          <ul class="summary">
            <li class="header">はじめに</li>

            <li class="chapter" data-level="1.1" data-path="../">
              <a href="../"> TOP </a>
            </li>

            <li
              class="chapter"
              data-level="1.2"
              data-path="../intro/common-values.html"
            >
              <a href="../intro/common-values.html"> Common Values </a>
            </li>

            <li
              class="chapter"
              data-level="1.3"
              data-path="../intro/curriculum.html"
            >
              <a href="../intro/curriculum.html"> Curriculum </a>
            </li>

            <li class="header">事前準備</li>

            <li
              class="chapter"
              data-level="2.1"
              data-path="../prerequisite/beginner.html"
            >
              <a href="../prerequisite/beginner.html"> 初級者向けコンテンツ </a>
            </li>

            <li
              class="chapter"
              data-level="2.2"
              data-path="../prerequisite/dev-tools.html"
            >
              <a href="../prerequisite/dev-tools.html"> 開発ツール </a>

              <ul class="articles">
                <li
                  class="chapter"
                  data-level="2.2.1"
                  data-path="../prerequisite/developer-edition.html"
                >
                  <a href="../prerequisite/developer-edition.html">
                    Developer Edition
                  </a>
                </li>

                <li
                  class="chapter"
                  data-level="2.2.2"
                  data-path="../prerequisite/dev-hub.html"
                >
                  <a href="../prerequisite/dev-hub.html"> Dev Hub </a>
                </li>

                <li
                  class="chapter"
                  data-level="2.2.3"
                  data-path="../prerequisite/salesforce-ide.html"
                >
                  <a href="../prerequisite/salesforce-ide.html">
                    Salesforce IDE
                  </a>
                </li>

                <li
                  class="chapter"
                  data-level="2.2.4"
                  data-path="../prerequisite/vs-code-extensions.html"
                >
                  <a href="../prerequisite/vs-code-extensions.html">
                    VS Code Extensions
                  </a>
                </li>

                <li
                  class="chapter"
                  data-level="2.2.5"
                  data-path="../prerequisite/java.html"
                >
                  <a href="../prerequisite/java.html"> Java </a>
                </li>

                <li
                  class="chapter"
                  data-level="2.2.6"
                  data-path="../prerequisite/nodejs.html"
                >
                  <a href="../prerequisite/nodejs.html"> Node.js & Yarn </a>
                </li>
              </ul>
            </li>

            <li class="header">演習問題</li>

            <li class="chapter" data-level="3.1" data-path="warm-up.html">
              <a href="warm-up.html"> Warm-up </a>

              <ul class="articles">
                <li
                  class="chapter"
                  data-level="3.1.1"
                  data-path="warm-up-answer.html"
                >
                  <a href="warm-up-answer.html"> Warm-up の解答 </a>
                </li>
              </ul>
            </li>

            <li class="chapter" data-level="3.2" data-path="level-01.html">
              <a href="level-01.html"> Lv. 1 </a>

              <ul class="articles">
                <li
                  class="chapter"
                  data-level="3.2.1"
                  data-path="level-01-answer.html"
                >
                  <a href="level-01-answer.html"> Lv. 1 の解答 </a>
                </li>
              </ul>
            </li>

            <li class="chapter" data-level="3.3" data-path="level-02.html">
              <a href="level-02.html"> Lv. 2 </a>

              <ul class="articles">
                <li
                  class="chapter"
                  data-level="3.3.1"
                  data-path="level-02-answer.html"
                >
                  <a href="level-02-answer.html"> Lv. 2 の解答 </a>
                </li>
              </ul>
            </li>

            <li class="chapter" data-level="3.4" data-path="level-03.html">
              <a href="level-03.html"> Lv. 3 </a>

              <ul class="articles">
                <li
                  class="chapter"
                  data-level="3.4.1"
                  data-path="level-03-answer.html"
                >
                  <a href="level-03-answer.html"> Lv. 3 の解答 </a>
                </li>
              </ul>
            </li>

            <li class="chapter" data-level="3.5" data-path="level-04.html">
              <a href="level-04.html"> Lv. 4 </a>

              <ul class="articles">
                <li
                  class="chapter"
                  data-level="3.5.1"
                  data-path="level-04-answer.html"
                >
                  <a href="level-04-answer.html"> Lv. 4 の解答 </a>
                </li>
              </ul>
            </li>

            <li class="chapter" data-level="3.6" data-path="level-05.html">
              <a href="level-05.html"> Lv. 5 </a>

              <ul class="articles">
                <li
                  class="chapter active"
                  data-level="3.6.1"
                  data-path="level-05-answer.html"
                >
                  <a href="level-05-answer.html"> Lv. 5 の解答 </a>
                </li>
              </ul>
            </li>

            <li class="header">次のステップ</li>

            <li class="chapter" data-level="4.1" data-path="../next-step/">
              <a href="../next-step/"> Trailhead </a>
            </li>

            <li class="chapter" data-level="4.2" data-path="../next-step/">
              <a href="../next-step/#開発者ガイド"> 開発者ガイド </a>
            </li>

            <li class="divider"></li>

            <li class="chapter" data-level="5.1" data-path="../">
              <a href="../#acknowledgment"> Acknowledgment </a>
            </li>

            <li class="chapter" data-level="5.2" data-path="../">
              <a href="../#author"> Author </a>
            </li>

            <li class="divider"></li>

            <li class="chapter" data-level="6.1">
              <a
                target="_blank"
                href="https://github.com/takahitomiyamoto/apex-trigger-intermediate"
              >
                View on GitHub
              </a>
            </li>

            <li class="divider"></li>

            <li>
              <a
                href="https://github.com/honkit/honkit"
                target="blank"
                class="gitbook-link"
              >
                HonKitで公開
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="book-body">
        <div class="body-inner">
          <div class="book-header" role="navigation">
            <!-- Title -->
            <h1>
              <i class="fa fa-circle-o-notch fa-spin"></i>
              <a href="..">Lv. 5 の解答</a>
            </h1>
          </div>

          <div class="page-wrapper" tabindex="-1" role="main">
            <div class="page-inner">
              <div id="book-search-results">
                <div class="search-noresults">
                  <section class="normal markdown-section">
                    <h1 id="lv-5-&#x306E;&#x89E3;&#x7B54;">
                      Lv. 5 &#x306E;&#x89E3;&#x7B54;
                    </h1>
                    <hr />
                    <h2 id="&#x30A2;&#x30A6;&#x30C8;&#x30E9;&#x30A4;&#x30F3;">
                      &#x30A2;&#x30A6;&#x30C8;&#x30E9;&#x30A4;&#x30F3;
                    </h2>
                    <ul>
                      <li>
                        <a
                          href="#1-apex-&#x30C8;&#x30EA;&#x30AC;&#x3092;&#x4F5C;&#x6210;"
                          >1. Apex
                          &#x30C8;&#x30EA;&#x30AC;&#x3092;&#x4F5C;&#x6210;</a
                        >
                        <ul>
                          <li>
                            <a href="#opportunitytriggertrigger"
                              >OpportunityTrigger.trigger</a
                            >
                          </li>
                          <li>
                            <a href="#casetriggertrigger"
                              >CaseTrigger.trigger</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li>
                        <a
                          href="#2-&#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x8868;&#x793A;&#x30E9;&#x30D9;&#x30EB;&#x3092;&#x8FFD;&#x52A0;"
                          >2.
                          &#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x8868;&#x793A;&#x30E9;&#x30D9;&#x30EB;&#x3092;&#x8FFD;&#x52A0;</a
                        >
                        <ul>
                          <li>
                            <a href="#customlabelslabels-metaxml"
                              >CustomLabels.labels-meta.xml</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li>
                        <a
                          href="#3-apex-&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;"
                          >3. Apex
                          &#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;</a
                        >
                        <ul>
                          <li>
                            <a href="#opportunitytriggervalidationcls"
                              >OpportunityTriggerValidation.cls</a
                            >
                          </li>
                          <li>
                            <a href="#casetriggerservicecls"
                              >CaseTriggerService.cls</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li>
                        <a
                          href="#4-&#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x30E1;&#x30BF;&#x30C7;&#x30FC;&#x30BF;&#x578B;&#x3092;&#x4F5C;&#x6210;"
                          >4.
                          &#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x30E1;&#x30BF;&#x30C7;&#x30FC;&#x30BF;&#x578B;&#x3092;&#x4F5C;&#x6210;</a
                        >
                        <ul>
                          <li>
                            <a
                              href="#fattriggerobserveropportunitytriggervalidationmd-metaxml"
                              >FAT_TriggerObserver.OpportunityTriggerValidation.md-meta.xml</a
                            >
                          </li>
                          <li>
                            <a
                              href="#fattriggerobservercasetriggerservicemd-metaxml"
                              >FAT_TriggerObserver.CaseTriggerService.md-meta.xml</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li>
                        <a
                          href="#5-apex-&#x30C6;&#x30B9;&#x30C8;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;"
                          >5. Apex
                          &#x30C6;&#x30B9;&#x30C8;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;</a
                        >
                        <ul>
                          <li>
                            <a href="#opportunitytriggervalidationtestcls"
                              >OpportunityTriggerValidationTest.cls</a
                            >
                          </li>
                          <li>
                            <a href="#opportunitytestutilscls"
                              >OpportunityTestUtils.cls</a
                            >
                          </li>
                          <li>
                            <a href="#opportunitytriggertestcls"
                              >OpportunityTriggerTest.cls</a
                            >
                          </li>
                          <li>
                            <a href="#casetriggerservicetestcls"
                              >CaseTriggerServiceTest.cls</a
                            >
                          </li>
                          <li>
                            <a href="#casetestutilscls">CaseTestUtils.cls</a>
                          </li>
                          <li>
                            <a href="#casetriggertestcls"
                              >CaseTriggerTest.cls</a
                            >
                          </li>
                        </ul>
                      </li>
                    </ul>
                    <hr />
                    <h2
                      id="1-apex-&#x30C8;&#x30EA;&#x30AC;&#x3092;&#x4F5C;&#x6210;"
                    >
                      1. Apex &#x30C8;&#x30EA;&#x30AC;&#x3092;&#x4F5C;&#x6210;
                    </h2>
                    <p>
                      1-1. Apex
                      &#x30C8;&#x30EA;&#x30AC;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <h3 id="opportunitytriggertrigger">
                      OpportunityTrigger.trigger
                    </h3>
                    <pre><code class="lang-sh">sfdx force:apex:trigger:create <span class="hljs-_">-d</span> force-app/main/default/triggers <span class="hljs-_">-e</span> <span class="hljs-string">&quot;before insert,before update,before delete,after insert,after update,after delete,after undelete&quot;</span> -n OpportunityTrigger <span class="hljs-_">-s</span> Opportunity -t ApexTrigger
</code></pre>
                    <p><strong>OpportunityTrigger.trigger</strong></p>
                    <pre><code class="lang-java"><span class="hljs-function">trigger OpportunityTrigger on <span class="hljs-title">Opportunity</span><span class="hljs-params">(
  before insert,
  before update,
  before delete,
  after insert,
  after update,
  after delete,
  after undelete
)</span> </span>{
  FAT_CommonTriggerHandler handler = FAT_CommonTriggerHandler.create(
    Opportunity.class
  );
  handler.invoke();
}
</code></pre>
                    <h3 id="casetriggertrigger">CaseTrigger.trigger</h3>
                    <pre><code class="lang-sh">sfdx force:apex:trigger:create <span class="hljs-_">-d</span> force-app/main/default/triggers <span class="hljs-_">-e</span> <span class="hljs-string">&quot;before insert,before update,before delete,after insert,after update,after delete,after undelete&quot;</span> -n CaseTrigger <span class="hljs-_">-s</span> Case -t ApexTrigger
</code></pre>
                    <p><strong>CaseTrigger.trigger</strong></p>
                    <pre><code class="lang-java"><span class="hljs-function">trigger CaseTrigger on <span class="hljs-title">Case</span><span class="hljs-params">(
  before insert,
  before update,
  before delete,
  after insert,
  after update,
  after delete,
  after undelete
)</span> </span>{
  FAT_CommonTriggerHandler handler = FAT_CommonTriggerHandler.create(
    Case.class
  );
  handler.invoke();
}
</code></pre>
                    <p>
                      1-2.
                      &#x30B3;&#x30FC;&#x30C9;&#x3092;&#x30D5;&#x30A9;&#x30FC;&#x30DE;&#x30C3;&#x30C8;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh">yarn prettier
</code></pre>
                    <p>
                      1-3.
                      &#x30B9;&#x30AF;&#x30E9;&#x30C3;&#x30C1;&#x7D44;&#x7E54;&#x3078;&#x30D7;&#x30C3;&#x30B7;&#x30E5;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh">sfdx force:<span class="hljs-built_in">source</span>:push -u demo
</code></pre>
                    <hr />
                    <h2
                      id="2-&#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x8868;&#x793A;&#x30E9;&#x30D9;&#x30EB;&#x3092;&#x8FFD;&#x52A0;"
                    >
                      2.
                      &#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x8868;&#x793A;&#x30E9;&#x30D9;&#x30EB;&#x3092;&#x8FFD;&#x52A0;
                    </h2>
                    <p>
                      2-1.
                      &#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x8868;&#x793A;&#x30E9;&#x30D9;&#x30EB;&#x3092;&#x8FFD;&#x52A0;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <h3 id="customlabelslabels-metaxml">
                      CustomLabels.labels-meta.xml
                    </h3>
                    <ul>
                      <li>CLOSED_WON_CANNOT_BE_DELETED</li>
                      <li>HIGH_CASE_IS_CREATED</li>
                    </ul>
                    <pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> <span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">CustomLabels</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://soap.sforce.com/2006/04/metadata&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">labels</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">fullName</span>&gt;</span>SLA_EXPIRATION_DATE_REQUIRED<span class="hljs-tag">&lt;/<span class="hljs-name">fullName</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">categories</span>&gt;</span>ERROR<span class="hljs-tag">&lt;/<span class="hljs-name">categories</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">language</span>&gt;</span>ja<span class="hljs-tag">&lt;/<span class="hljs-name">language</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">protected</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">protected</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">shortDescription</span>&gt;</span>SLA_EXPIRATION_DATE_REQUIRED<span class="hljs-tag">&lt;/<span class="hljs-name">shortDescription</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>SLA &#x304C;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x5834;&#x5408;&#x306F;&#x6709;&#x52B9;&#x671F;&#x9650;&#x3082;&#x5165;&#x529B;&#x3057;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&#x3002;<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">labels</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">labels</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">fullName</span>&gt;</span>SLA_SERIAL_NUMBER_REQUIRED<span class="hljs-tag">&lt;/<span class="hljs-name">fullName</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">categories</span>&gt;</span>ERROR<span class="hljs-tag">&lt;/<span class="hljs-name">categories</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">language</span>&gt;</span>ja<span class="hljs-tag">&lt;/<span class="hljs-name">language</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">protected</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">protected</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">shortDescription</span>&gt;</span>SLA_SERIAL_NUMBER_REQUIRED<span class="hljs-tag">&lt;/<span class="hljs-name">shortDescription</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>
    &gt;</span>SLA &#x304C;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x5834;&#x5408;&#x306F;&#x30B7;&#x30EA;&#x30A2;&#x30EB;&#x30CA;&#x30F3;&#x30D0;&#x30FC;&#x3082;&#x5165;&#x529B;&#x3057;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&#x3002;<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">labels</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">labels</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">fullName</span>&gt;</span>CLOSED_WON_CANNOT_BE_DELETED<span class="hljs-tag">&lt;/<span class="hljs-name">fullName</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">categories</span>&gt;</span>ERROR<span class="hljs-tag">&lt;/<span class="hljs-name">categories</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">language</span>&gt;</span>ja<span class="hljs-tag">&lt;/<span class="hljs-name">language</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">protected</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">protected</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">shortDescription</span>&gt;</span>CLOSED_WON_CANNOT_BE_DELETED<span class="hljs-tag">&lt;/<span class="hljs-name">shortDescription</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>&#x6210;&#x7D04;&#x6E08;&#x307F;&#x306E;&#x5546;&#x8AC7;&#x306F;&#x524A;&#x9664;&#x3067;&#x304D;&#x307E;&#x305B;&#x3093;&#x3002;<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">labels</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">labels</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">fullName</span>&gt;</span>HIGH_CASE_IS_CREATED<span class="hljs-tag">&lt;/<span class="hljs-name">fullName</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">categories</span>&gt;</span>INFO<span class="hljs-tag">&lt;/<span class="hljs-name">categories</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">language</span>&gt;</span>ja<span class="hljs-tag">&lt;/<span class="hljs-name">language</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">protected</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">protected</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">shortDescription</span>&gt;</span>HIGH_CASE_IS_CREATED<span class="hljs-tag">&lt;/<span class="hljs-name">shortDescription</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>&#x512A;&#x5148;&#x5EA6;&#x306E;&#x9AD8;&#x3044;&#x30B1;&#x30FC;&#x30B9;&#x304C;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x307E;&#x3057;&#x305F;&#xFF01;<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">labels</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">CustomLabels</span>&gt;</span>
</code></pre>
                    <p>
                      2-2.
                      &#x30B3;&#x30FC;&#x30C9;&#x3092;&#x30D5;&#x30A9;&#x30FC;&#x30DE;&#x30C3;&#x30C8;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh">yarn prettier
</code></pre>
                    <p>
                      2-3.
                      &#x30B9;&#x30AF;&#x30E9;&#x30C3;&#x30C1;&#x7D44;&#x7E54;&#x3078;&#x30D7;&#x30C3;&#x30B7;&#x30E5;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh">sfdx force:<span class="hljs-built_in">source</span>:push -u demo
</code></pre>
                    <hr />
                    <h2
                      id="3-apex-&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;"
                    >
                      3. Apex &#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;
                    </h2>
                    <p>
                      3-1. Apex
                      &#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <h3 id="opportunitytriggervalidationcls">
                      OpportunityTriggerValidation.cls
                    </h3>
                    <pre><code class="lang-sh">sfdx force:apex:class:create <span class="hljs-_">-d</span> force-app/main/default/classes -n OpportunityTriggerValidation -t DefaultApexClass
</code></pre>
                    <p><strong>OpportunityTriggerValidation.cls</strong></p>
                    <pre><code class="lang-java"><span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">&apos;PMD.EmptyStatementBlock,PMD.ApexDoc&apos;</span>)
<span class="hljs-keyword">public</span> with sharing <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OpportunityTriggerValidation</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">FAT_ITriggerObserver</span> </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String CLOSED_WON_CANNOT_BE_DELETED = System.Label.CLOSED_WON_CANNOT_BE_DELETED;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String CLOSED_WON = <span class="hljs-string">&apos;Closed Won&apos;</span>;

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> FAT_CommonLogger logger = FAT_CommonLogger.getInstance();

  <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Exception</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMethodName</span><span class="hljs-params">(String methodName)</span> </span>{
    logger.setClassName(OpportunityTriggerValidation.class.getName());
    logger.setMethodName(methodName);
  }

  <span class="hljs-meta">@TestVisible</span>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">preventDeletion</span><span class="hljs-params">(List&lt;Opportunity&gt; opportunities)</span> </span>{
    <span class="hljs-keyword">this</span>.setMethodName(<span class="hljs-string">&apos;preventDeletion&apos;</span>);

    <span class="hljs-keyword">for</span> (Opportunity opportunity : opportunities) {
      logger.store(LoggingLevel.DEBUG, <span class="hljs-string">&apos;opportunity: &apos;</span> + opportunity.Id);

      Boolean closedWon = CLOSED_WON.equals(opportunity.StageName);
      <span class="hljs-keyword">if</span> (closedWon) {
        opportunity.StageName.addError(CLOSED_WON_CANNOT_BE_DELETED);
        String errorMessage = CLOSED_WON_CANNOT_BE_DELETED;

        CustomException e = <span class="hljs-keyword">new</span> CustomException();
        e.setMessage(errorMessage);
        <span class="hljs-keyword">throw</span> e;
      }
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeInsert</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeUpdate</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeDelete</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
    <span class="hljs-keyword">this</span>.preventDeletion((List&lt;Opportunity&gt;) handler.oldObjects);
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterInsert</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterUpdate</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterDelete</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterUndelete</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }
}
</code></pre>
                    <h3 id="casetriggerservicecls">CaseTriggerService.cls</h3>
                    <pre><code class="lang-sh">sfdx force:apex:class:create <span class="hljs-_">-d</span> force-app/main/default/classes -n CaseTriggerService -t DefaultApexClass
</code></pre>
                    <p><strong>CaseTriggerService.cls</strong></p>
                    <pre><code class="lang-java"><span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">&apos;PMD.EmptyStatementBlock,PMD.ApexDoc&apos;</span>)
<span class="hljs-keyword">public</span> with sharing <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CaseTriggerService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">FAT_ITriggerObserver</span> </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String HIGH_CASE_IS_CREATED = System.Label.HIGH_CASE_IS_CREATED;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String PRIORITY_HIGH = <span class="hljs-string">&apos;High&apos;</span>;

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> FAT_CommonLogger logger = FAT_CommonLogger.getInstance();

  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMethodName</span><span class="hljs-params">(String methodName)</span> </span>{
    logger.setClassName(CaseTriggerService.class.getName());
    logger.setMethodName(methodName);
  }

  <span class="hljs-meta">@TestVisible</span>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">postFeedItems</span><span class="hljs-params">(List&lt;Case&gt; cases)</span> </span>{
    <span class="hljs-keyword">this</span>.setMethodName(<span class="hljs-string">&apos;postFeedItems&apos;</span>);

    List&lt;FeedItem&gt; feedItems = <span class="hljs-keyword">new</span> List&lt;FeedItem&gt;();
    <span class="hljs-keyword">for</span> (Case newCase : cases) {
      logger.store(LoggingLevel.DEBUG, <span class="hljs-string">&apos;New Case: &apos;</span> + newCase.Id);

      Boolean isHigh = PRIORITY_HIGH.equals(newCase.Priority);
      <span class="hljs-keyword">if</span> (isHigh) {
        FeedItem feedItem = <span class="hljs-keyword">new</span> FeedItem();
        feedItem.ParentId = newCase.Id;
        feedItem.Body = HIGH_CASE_IS_CREATED;
        feedItems.add(feedItem);
      }
    }
    Database.insert(feedItems, <span class="hljs-keyword">false</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeInsert</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeUpdate</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeDelete</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterInsert</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
    <span class="hljs-keyword">this</span>.postFeedItems((List&lt;Case&gt;) handler.newObjects);
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterUpdate</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterDelete</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterUndelete</span><span class="hljs-params">(FAT_CommonTriggerHandler handler)</span> </span>{
  }
}
</code></pre>
                    <p>
                      3-2.
                      &#x30B3;&#x30FC;&#x30C9;&#x3092;&#x30D5;&#x30A9;&#x30FC;&#x30DE;&#x30C3;&#x30C8;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh">yarn prettier
</code></pre>
                    <p>
                      3-3.
                      &#x30B9;&#x30AF;&#x30E9;&#x30C3;&#x30C1;&#x7D44;&#x7E54;&#x3078;&#x30D7;&#x30C3;&#x30B7;&#x30E5;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh">sfdx force:<span class="hljs-built_in">source</span>:push -u demo
</code></pre>
                    <hr />
                    <h2
                      id="4-&#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x30E1;&#x30BF;&#x30C7;&#x30FC;&#x30BF;&#x578B;&#x3092;&#x4F5C;&#x6210;"
                    >
                      4.
                      &#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x30E1;&#x30BF;&#x30C7;&#x30FC;&#x30BF;&#x578B;&#x3092;&#x4F5C;&#x6210;
                    </h2>
                    <h3
                      id="fattriggerobserveropportunitytriggervalidationmd-metaxml"
                    >
                      FAT_TriggerObserver.OpportunityTriggerValidation.md-meta.xml
                    </h3>
                    <p>
                      4-1.
                      <code
                        >FAT_TriggerObserver.AccountTriggerService.md-meta.xml</code
                      >
                      &#x3092;&#x30B3;&#x30D4;&#x30FC;&#x3057;&#x3066;&#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x30E1;&#x30BF;&#x30C7;&#x30FC;&#x30BF;&#x578B;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <p>
                      <strong
                        >FAT_TriggerObserver.OpportunityTriggerValidation.md-meta.xml</strong
                      >
                    </p>
                    <pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> <span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">CustomMetadata</span>
  <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://soap.sforce.com/2006/04/metadata&quot;</span>
  <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
  <span class="hljs-attr">xmlns:xsd</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>OpportunityTriggerValidation<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">protected</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">protected</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>Active__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>AfterDelete__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>AfterInsert__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>AfterUndelete__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>AfterUpdate__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>ApexClass__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:string&quot;</span>&gt;</span>OpportunityTriggerValidation<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>BeforeDelete__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>BeforeInsert__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>BeforeUpdate__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>SObject__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:string&quot;</span>&gt;</span>Opportunity<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">CustomMetadata</span>&gt;</span>
</code></pre>
                    <h3 id="fattriggerobservercasetriggerservicemd-metaxml">
                      FAT_TriggerObserver.CaseTriggerService.md-meta.xml
                    </h3>
                    <p>
                      4-2.
                      <code
                        >FAT_TriggerObserver.AccountTriggerService.md-meta.xml</code
                      >
                      &#x3092;&#x30B3;&#x30D4;&#x30FC;&#x3057;&#x3066;&#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x30E1;&#x30BF;&#x30C7;&#x30FC;&#x30BF;&#x578B;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <p>
                      <strong
                        >FAT_TriggerObserver.CaseTriggerService.md-meta.xml</strong
                      >
                    </p>
                    <pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> <span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">CustomMetadata</span>
  <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://soap.sforce.com/2006/04/metadata&quot;</span>
  <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
  <span class="hljs-attr">xmlns:xsd</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>CaseTriggerService<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">protected</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">protected</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>Active__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>AfterDelete__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>AfterInsert__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>AfterUndelete__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>AfterUpdate__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>ApexClass__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:string&quot;</span>&gt;</span>CaseTriggerService<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>BeforeDelete__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>BeforeInsert__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>BeforeUpdate__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:boolean&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">values</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>SObject__c<span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">&quot;xsd:string&quot;</span>&gt;</span>Case<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">values</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">CustomMetadata</span>&gt;</span>
</code></pre>
                    <p>
                      4-3.
                      &#x30B3;&#x30FC;&#x30C9;&#x3092;&#x30D5;&#x30A9;&#x30FC;&#x30DE;&#x30C3;&#x30C8;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh">yarn prettier
</code></pre>
                    <p>
                      4-4.
                      &#x30B9;&#x30AF;&#x30E9;&#x30C3;&#x30C1;&#x7D44;&#x7E54;&#x3078;&#x30D7;&#x30C3;&#x30B7;&#x30E5;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh">sfdx force:<span class="hljs-built_in">source</span>:push -u demo
</code></pre>
                    <hr />
                    <h2
                      id="5-apex-&#x30C6;&#x30B9;&#x30C8;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;"
                    >
                      5. Apex
                      &#x30C6;&#x30B9;&#x30C8;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;
                    </h2>
                    <p>
                      5-1. Apex
                      &#x30C6;&#x30B9;&#x30C8;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <h3 id="opportunitytriggervalidationtestcls">
                      OpportunityTriggerValidationTest.cls
                    </h3>
                    <pre><code class="lang-sh">sfdx force:apex:class:create <span class="hljs-_">-d</span> force-app/<span class="hljs-built_in">test</span>/default/classes -n OpportunityTriggerValidationTest -t ApexUnitTest
</code></pre>
                    <p><strong>OpportunityTriggerValidationTest.cls</strong></p>
                    <pre><code class="lang-java"><span class="hljs-meta">@isTest</span>(SeeAllData=<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OpportunityTriggerValidationTest</span> </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String CLOSED_WON_CANNOT_BE_DELETED = System.Label.CLOSED_WON_CANNOT_BE_DELETED;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String CLOSED_WON = <span class="hljs-string">&apos;Closed Won&apos;</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> OpportunityTriggerValidation validation = <span class="hljs-keyword">new</span> OpportunityTriggerValidation();
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> FAT_CommonTriggerHandler handler = FAT_CommonTriggerHandler.create(
    Opportunity.class
  );

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">preventDeletion</span><span class="hljs-params">()</span> </span>{
    List&lt;Opportunity&gt; opportunities = <span class="hljs-keyword">new</span> List&lt;Opportunity&gt;();
    Opportunity opportunity = <span class="hljs-keyword">new</span> Opportunity();
    opportunity.StageName = CLOSED_WON;
    opportunities.add(opportunity);

    Test.startTest();
    List&lt;Boolean&gt; exceptions = <span class="hljs-keyword">new</span> List&lt;Boolean&gt;();
    <span class="hljs-keyword">try</span> {
      validation.preventDeletion(opportunities);
    } <span class="hljs-keyword">catch</span> (Exception e) {
      exceptions.add(<span class="hljs-keyword">true</span>);
      String message = e.getMessage();
      System.assertEquals(
        CLOSED_WON_CANNOT_BE_DELETED,
        message,
        <span class="hljs-string">&apos;preventDeletion&apos;</span>
      );
    }
    Test.stopTest();

    <span class="hljs-keyword">for</span> (Boolean b : exceptions) {
      System.assertEquals(<span class="hljs-keyword">true</span>, b, <span class="hljs-string">&apos;preventDeletion&apos;</span>);
    }
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeInsert</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    validation.onBeforeInsert(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onBeforeInsert&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeUpdate</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    validation.onBeforeUpdate(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onBeforeUpdate&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeDelete</span><span class="hljs-params">()</span> </span>{
    List&lt;Opportunity&gt; opportunities = <span class="hljs-keyword">new</span> List&lt;Opportunity&gt;();
    handler.oldObjects = opportunities;

    Test.startTest();
    validation.onBeforeDelete(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onBeforeDelete&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterInsert</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    validation.onAfterInsert(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onAfterInsert&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterUpdate</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    validation.onAfterUpdate(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onAfterUpdate&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterDelete</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    validation.onAfterDelete(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onAfterDelete&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterUndelete</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    validation.onAfterUndelete(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onAfterUndelete&apos;</span>);
  }
}
</code></pre>
                    <h3 id="opportunitytestutilscls">
                      OpportunityTestUtils.cls
                    </h3>
                    <pre><code class="lang-sh">sfdx force:apex:class:create <span class="hljs-_">-d</span> force-app/<span class="hljs-built_in">test</span>/default/classes -n OpportunityTestUtils -t ApexUnitTest
</code></pre>
                    <p><strong>OpportunityTestUtils.cls</strong></p>
                    <pre><code class="lang-java"><span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">&apos;PMD.ApexDoc&apos;</span>)
<span class="hljs-meta">@isTest</span>(SeeAllData=<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">public</span> with sharing <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OpportunityTestUtils</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;Opportunity&gt; <span class="hljs-title">createNormalOpportunities</span><span class="hljs-params">()</span> </span>{
    List&lt;Opportunity&gt; opportunities = <span class="hljs-keyword">new</span> List&lt;Opportunity&gt;();

    Opportunity opportunity1 = <span class="hljs-keyword">new</span> Opportunity();
    opportunity1.Name = <span class="hljs-string">&apos;Demo 1&apos;</span>;
    opportunity1.StageName = <span class="hljs-string">&apos;Closed Won&apos;</span>;
    opportunity1.CloseDate = Date.today();
    opportunities.add(opportunity1);

    <span class="hljs-keyword">return</span> opportunities;
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;Opportunity&gt; <span class="hljs-title">selectOpportunities</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> [
      SELECT Id, Name, StageName, CloseDate
      FROM Opportunity
      ORDER BY Name ASC
      LIMIT <span class="hljs-number">50000</span>
    ];
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insertOpportunities</span><span class="hljs-params">(List&lt;Opportunity&gt; opportunities)</span> </span>{
    List&lt;Database.SaveResult&gt; results = Database.insert(opportunities, <span class="hljs-keyword">false</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateOpportunities</span><span class="hljs-params">(List&lt;Opportunity&gt; opportunities)</span> </span>{
    List&lt;Database.SaveResult&gt; results = Database.update(opportunities, <span class="hljs-keyword">false</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deleteOpportunities</span><span class="hljs-params">(List&lt;Opportunity&gt; opportunities)</span> </span>{
    List&lt;Database.DeleteResult&gt; results = Database.delete(opportunities, <span class="hljs-keyword">false</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">undeleteOpportunities</span><span class="hljs-params">(List&lt;Opportunity&gt; opportunities)</span> </span>{
    List&lt;Database.UndeleteResult&gt; results = Database.undelete(
      opportunities,
      <span class="hljs-keyword">false</span>
    );
  }
}
</code></pre>
                    <h3 id="opportunitytriggertestcls">
                      OpportunityTriggerTest.cls
                    </h3>
                    <pre><code class="lang-sh">sfdx force:apex:class:create <span class="hljs-_">-d</span> force-app/<span class="hljs-built_in">test</span>/default/classes -n OpportunityTriggerTest -t ApexUnitTest
</code></pre>
                    <p><strong>OpportunityTriggerTest.cls</strong></p>
                    <pre><code class="lang-java"><span class="hljs-meta">@isTest</span>(SeeAllData=<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OpportunityTriggerTest</span> </span>{
  <span class="hljs-meta">@testSetup</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
    List&lt;Opportunity&gt; opportunities = OpportunityTestUtils.createNormalOpportunities();
    OpportunityTestUtils.insertOpportunities(opportunities);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">invokeDelete</span><span class="hljs-params">()</span> </span>{
    List&lt;Opportunity&gt; opportunities = OpportunityTestUtils.selectOpportunities();

    Test.startTest();
    OpportunityTestUtils.deleteOpportunities(opportunities);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-number">0</span>, opportunities.size(), <span class="hljs-string">&apos;invokeDelete&apos;</span>);
  }
}
</code></pre>
                    <h3 id="casetriggerservicetestcls">
                      CaseTriggerServiceTest.cls
                    </h3>
                    <pre><code class="lang-sh">sfdx force:apex:class:create <span class="hljs-_">-d</span> force-app/<span class="hljs-built_in">test</span>/default/classes -n CaseTriggerServiceTest -t ApexUnitTest
</code></pre>
                    <p><strong>CaseTriggerServiceTest.cls</strong></p>
                    <pre><code class="lang-java"><span class="hljs-meta">@isTest</span>(SeeAllData=<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CaseTriggerServiceTest</span> </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CaseTriggerService service = <span class="hljs-keyword">new</span> CaseTriggerService();
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> FAT_CommonTriggerHandler handler = FAT_CommonTriggerHandler.create(
    Case.class
  );

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">postFeedItems</span><span class="hljs-params">()</span> </span>{
    List&lt;Case&gt; cases = <span class="hljs-keyword">new</span> List&lt;Case&gt;();
    Case newCase = <span class="hljs-keyword">new</span> Case();
    newCase.Priority = <span class="hljs-string">&apos;High&apos;</span>;
    newCase.Origin = <span class="hljs-string">&apos;Phone&apos;</span>;
    newCase.Status = <span class="hljs-string">&apos;New&apos;</span>;
    cases.add(newCase);

    Test.startTest();
    service.postFeedItems(cases);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, cases, <span class="hljs-string">&apos;postFeedItems&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeInsert</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    service.onBeforeInsert(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onBeforeInsert&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeUpdate</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    service.onBeforeUpdate(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onBeforeUpdate&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBeforeDelete</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    service.onBeforeDelete(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onBeforeDelete&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterInsert</span><span class="hljs-params">()</span> </span>{
    List&lt;Case&gt; cases = <span class="hljs-keyword">new</span> List&lt;Case&gt;();
    handler.newObjects = cases;

    Test.startTest();
    service.onAfterInsert(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onAfterInsert&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterUpdate</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    service.onAfterUpdate(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onAfterUpdate&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterDelete</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    service.onAfterDelete(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onAfterDelete&apos;</span>);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAfterUndelete</span><span class="hljs-params">()</span> </span>{
    Test.startTest();
    service.onAfterUndelete(handler);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-keyword">null</span>, handler, <span class="hljs-string">&apos;onAfterUndelete&apos;</span>);
  }
}
</code></pre>
                    <h3 id="casetestutilscls">CaseTestUtils.cls</h3>
                    <pre><code class="lang-sh">sfdx force:apex:class:create <span class="hljs-_">-d</span> force-app/<span class="hljs-built_in">test</span>/default/classes -n CaseTestUtils -t ApexUnitTest
</code></pre>
                    <p><strong>CaseTestUtils.cls</strong></p>
                    <pre><code class="lang-java"><span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">&apos;PMD.ApexDoc&apos;</span>)
<span class="hljs-meta">@isTest</span>(SeeAllData=<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">public</span> with sharing <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CaseTestUtils</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;Case&gt; <span class="hljs-title">createNormalCases</span><span class="hljs-params">()</span> </span>{
    List&lt;Case&gt; cases = <span class="hljs-keyword">new</span> List&lt;Case&gt;();

    Case case1 = <span class="hljs-keyword">new</span> Case();
    case1.Priority = <span class="hljs-string">&apos;High&apos;</span>;
    case1.Origin = <span class="hljs-string">&apos;Phone&apos;</span>;
    case1.Status = <span class="hljs-string">&apos;New&apos;</span>;
    cases.add(case1);

    <span class="hljs-keyword">return</span> cases;
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;Case&gt; <span class="hljs-title">selectCases</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> [
      SELECT Id, CaseNumber, Priority, Origin, Status
      FROM Case
      ORDER BY CaseNumber ASC
      LIMIT <span class="hljs-number">50000</span>
    ];
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insertCases</span><span class="hljs-params">(List&lt;Case&gt; cases)</span> </span>{
    List&lt;Database.SaveResult&gt; results = Database.insert(cases, <span class="hljs-keyword">false</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateCases</span><span class="hljs-params">(List&lt;Case&gt; cases)</span> </span>{
    List&lt;Database.SaveResult&gt; results = Database.update(cases, <span class="hljs-keyword">false</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deleteCases</span><span class="hljs-params">(List&lt;Case&gt; cases)</span> </span>{
    List&lt;Database.DeleteResult&gt; results = Database.delete(cases, <span class="hljs-keyword">false</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">undeleteCases</span><span class="hljs-params">(List&lt;Case&gt; cases)</span> </span>{
    List&lt;Database.UndeleteResult&gt; results = Database.undelete(cases, <span class="hljs-keyword">false</span>);
  }
}
</code></pre>
                    <h3 id="casetriggertestcls">CaseTriggerTest.cls</h3>
                    <pre><code class="lang-sh">sfdx force:apex:class:create <span class="hljs-_">-d</span> force-app/<span class="hljs-built_in">test</span>/default/classes -n CaseTriggerTest -t ApexUnitTest
</code></pre>
                    <p><strong>CaseTriggerTest.cls</strong></p>
                    <pre><code class="lang-java"><span class="hljs-meta">@isTest</span>(SeeAllData=<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CaseTriggerTest</span> </span>{
  <span class="hljs-meta">@testSetup</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
    List&lt;Case&gt; cases = CaseTestUtils.createNormalCases();
    CaseTestUtils.insertCases(cases);
  }

  <span class="hljs-meta">@isTest</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">invokeDelete</span><span class="hljs-params">()</span> </span>{
    List&lt;Case&gt; cases = CaseTestUtils.selectCases();

    Test.startTest();
    CaseTestUtils.deleteCases(cases);
    Test.stopTest();

    System.assertNotEquals(<span class="hljs-number">0</span>, cases.size(), <span class="hljs-string">&apos;invokeDelete&apos;</span>);
  }
}
</code></pre>
                    <p>
                      5-2.
                      &#x30B3;&#x30FC;&#x30C9;&#x3092;&#x30D5;&#x30A9;&#x30FC;&#x30DE;&#x30C3;&#x30C8;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh">yarn prettier
</code></pre>
                    <p>
                      5-3.
                      &#x30B9;&#x30AF;&#x30E9;&#x30C3;&#x30C1;&#x7D44;&#x7E54;&#x3078;&#x30D7;&#x30C3;&#x30B7;&#x30E5;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh">sfdx force:<span class="hljs-built_in">source</span>:push -u demo
</code></pre>
                    <p>
                      5-4. Apex
                      &#x30C6;&#x30B9;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3057;&#x3066;&#x73FE;&#x5728;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x30AB;&#x30D0;&#x30FC;&#x7387;&#x3092;&#x78BA;&#x8A8D;&#x3057;&#x307E;&#x3059;&#x3002;
                    </p>
                    <pre><code class="lang-sh"><span class="hljs-built_in">export</span> SFDX_IMPROVED_CODE_COVERAGE=<span class="hljs-string">&quot;true&quot;</span>

sfdx force:apex:<span class="hljs-built_in">test</span>:run -c <span class="hljs-_">-l</span> RunLocalTests -r human -u demo
</code></pre>
                    <pre><code class="lang-sh">=== Apex Code Coverage
ID                  NAME                           % COVERED  UNCOVERED LINES
&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;  &#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;  &#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;  &#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;
01p0l0000027mMmAAI  FAT_CommonConstants            NaN%
01p0l0000027mMpAAI  FAT_CommonLogger               100%
01p0l0000027mMqAAI  FAT_CommonLoggerConstants      100%
01p0l0000027mMrAAI  FAT_CommonLoggerHelper         100%
01p0l0000027mMnAAI  FAT_CommonError                100%
01p0l0000027mMvAAI  FAT_CommonTriggerHandler       100%
01p0l0000027mMxAAI  FAT_CommonTriggerHelper        100%
01p0l0000027mN0AAI  FAT_CommonUtils                100%
01q0l000000HcL0AAK  FAT_LoggerEventTrigger         100%
01p0l0000027mN3AAI  FAT_LoggerEventTriggerService  100%
01q0l000000HcL5AAK  AccountTrigger                 100%
01p0l0000027mN7AAI  AccountTriggerService          100%
01p0l0000027mNAAAY  AccountTriggerValidation       100%
01q0l000000HctXAAS  CaseTrigger                    100%
01p0l0000027ppJAAQ  CaseTriggerService             100%
01q0l000000HctYAAS  OpportunityTrigger             100%
01p0l0000027ppLAAQ  OpportunityTriggerValidation   100%

=== Test Summary
NAME                 VALUE
&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;  &#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;
Outcome              Passed
Tests Ran            85
Passing              85
Failing              0
Skipped              0
Pass Rate            100%
Fail Rate            0%
Test Run Coverage    100%
Org Wide Coverage    100%
</code></pre>
                    <p>
                      &#x30B3;&#x30FC;&#x30C9;&#x30AB;&#x30D0;&#x30FC;&#x7387;&#x306F;
                      100%&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x307E;&#x3059;&#xFF01;
                    </p>
                    <p>
                      &#x52D5;&#x4F5C;&#x78BA;&#x8A8D;&#x3057;&#x3066;&#x307F;&#x307E;&#x3057;&#x3087;&#x3046;&#x3002;&#x5546;&#x8AC7;&#x753B;&#x9762;&#x3092;&#x958B;&#x3044;&#x3066;&#x3001;&#x60F3;&#x5B9A;&#x901A;&#x308A;&#x306E;&#x6319;&#x52D5;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x78BA;&#x8A8D;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;&#x3002;
                      &#x307E;&#x305F;&#x3001;&#x30B1;&#x30FC;&#x30B9;&#x753B;&#x9762;&#x3092;&#x958B;&#x3044;&#x3066;&#x3001;&#x60F3;&#x5B9A;&#x901A;&#x308A;&#x306E;&#x6319;&#x52D5;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x78BA;&#x8A8D;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;&#x3002;
                    </p>
                    <p>
                      ...
                      &#x3044;&#x304B;&#x304C;&#x3067;&#x3057;&#x305F;&#x304B;&#xFF1F;
                    </p>
                  </section>
                </div>
                <div class="search-results">
                  <div class="has-results">
                    <h1 class="search-results-title">
                      <span class="search-results-count"></span> results
                      matching "<span class="search-query"></span>"
                    </h1>
                    <ul class="search-results-list"></ul>
                  </div>
                  <div class="no-results">
                    <h1 class="search-results-title">
                      No results matching "<span class="search-query"></span>"
                    </h1>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <a
          href="level-05.html"
          class="navigation navigation-prev"
          aria-label="Previous page: Lv. 5"
        >
          <i class="fa fa-angle-left"></i>
        </a>

        <a
          href="../next-step/"
          class="navigation navigation-next"
          aria-label="Next page: Trailhead"
        >
          <i class="fa fa-angle-right"></i>
        </a>
      </div>

      <script>
        var gitbook = gitbook || [];
        gitbook.push(function () {
          gitbook.page.hasChanged({
            page: {
              title: 'Lv. 5 の解答',
              level: '3.6.1',
              depth: 2,
              next: {
                title: 'Trailhead',
                level: '4.1',
                depth: 1,
                path: 'next-step/README.md',
                ref: 'next-step/README.md',
                articles: []
              },
              previous: {
                title: 'Lv. 5',
                level: '3.6',
                depth: 1,
                path: 'exercises/level-05.md',
                ref: 'exercises/level-05.md',
                articles: [
                  {
                    title: 'Lv. 5 の解答',
                    level: '3.6.1',
                    depth: 2,
                    path: 'exercises/level-05-answer.md',
                    ref: 'exercises/level-05-answer.md',
                    articles: []
                  }
                ]
              },
              dir: 'ltr'
            },
            config: {
              plugins: [],
              root: './docs',
              styles: {
                website: 'styles/website.css',
                pdf: 'styles/pdf.css',
                epub: 'styles/epub.css',
                mobi: 'styles/mobi.css',
                ebook: 'styles/ebook.css',
                print: 'styles/print.css'
              },
              pluginsConfig: {
                highlight: {},
                search: {},
                lunr: { maxIndexSize: 1000000, ignoreSpecialCharacters: false },
                fontsettings: { theme: 'white', family: 'sans', size: 2 },
                'theme-default': {
                  styles: {
                    website: 'styles/website.css',
                    pdf: 'styles/pdf.css',
                    epub: 'styles/epub.css',
                    mobi: 'styles/mobi.css',
                    ebook: 'styles/ebook.css',
                    print: 'styles/print.css'
                  },
                  showLevel: false
                }
              },
              'pdf.embedFonts': 'false',
              theme: 'default',
              'structure.readme': 'docs/README.md',
              'pdf.margin.left': '62',
              author: 'Takahito Miyamoto',
              'structure.summary': 'docs/SUMMARY.md',
              'pdf.fontSize': '12',
              'pdf.margin.bottom': '56',
              'pdf.fontFamily': 'Arial',
              'pdf.paperSize': 'a4',
              'pdf.margin.top': '56',
              pdf: {
                pageNumbers: true,
                fontSize: 12,
                fontFamily: 'Arial',
                paperSize: 'a4',
                chapterMark: 'pagebreak',
                pageBreaksBefore: '/',
                margin: { right: 62, left: 62, top: 56, bottom: 56 },
                embedFonts: false
              },
              structure: {
                langs: 'LANGS.md',
                readme: 'README.md',
                glossary: 'GLOSSARY.md',
                summary: 'SUMMARY.md'
              },
              variables: {},
              'pdf.margin.right': '62',
              title: 'Apex Trigger Intermediate',
              language: 'ja',
              gitbook: '*',
              description: 'Apex トリガの中級レベルのチュートリアルです。',
              'pdf.pageNumbers': 'true'
            },
            file: {
              path: 'exercises/level-05-answer.md',
              mtime: '2020-09-07T12:22:41.913Z',
              type: 'markdown'
            },
            gitbook: { version: '3.6.1', time: '2020-09-08T09:52:50.063Z' },
            basePath: '..',
            book: { language: '' }
          });
        });
      </script>
    </div>

    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>

    <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>

    <script src="../gitbook/gitbook-plugin-search/search.js"></script>

    <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>

    <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>

    <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
  </body>
</html>
